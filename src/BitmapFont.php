<?php

declare(strict_types=1);

namespace Webcooking\ZplToGdImage;

/**
 * Bitmap font renderer for ZPL matrix fonts.
 * Simulates Zebra printer Font 0 (9 dots high × 5 dots wide).
 * 
 * REFAIT PROPREMENT - Toutes les lettres dessinées manuellement
 * Format: 36 lignes × 22 colonnes par caractère
 * - Lignes 0-3: marge haute (vides)
 * - Lignes 4-31: contenu (28 lignes pour uniformité)
 * - Lignes 32-35: marge basse (vides)
 */
class BitmapFont
{
    /**
     * Get bitmap pattern for a character.
     */
    public static function getCharacterPattern(string $char): array
    {
        $e = '0000000000000000000000'; // empty line
        
        $patterns = [
            ' ' => array_fill(0, 36, $e),
            
            'A' => [
                $e, $e, $e, $e,
                '0000001111110000000000',
                '0000011111111000000000',
                '0000111111111100000000',
                '0001111001111110000000',
                '0011110000111111000000',
                '0111100000011111100000',
                '1111000000001111110000',
                '1111000000001111110000',
                '1111000000000111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                $e, $e, $e, $e,
            ],
            
            'B' => [
                $e, $e, $e, $e,
                '1111111111100000000000',
                '1111111111111000000000',
                '1111111111111110000000',
                '1111111111111111000000',
                '1111000000111111000000',
                '1111000000011111100000',
                '1111000000011111100000',
                '1111000000011111100000',
                '1111000000111111000000',
                '1111111111111110000000',
                '1111111111111100000000',
                '1111111111111110000000',
                '1111111111111111000000',
                '1111000000011111100000',
                '1111000000001111100000',
                '1111000000001111100000',
                '1111000000001111100000',
                '1111000000001111100000',
                '1111000000011111100000',
                '1111000000111111000000',
                '1111111111111111000000',
                '1111111111111110000000',
                '1111111111111000000000',
                '1111111111100000000000',
                $e, $e, $e, $e,
            ],
            
            'C' => [
                $e, $e, $e, $e,
                '0001111111110000000000',
                '0011111111111100000000',
                '0111111111111110000000',
                '1111110000111111000000',
                '1111000000011111100000',
                '1111000000001111100000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000001111100000',
                '1111000000011111100000',
                '1111110000111111000000',
                '0111111111111110000000',
                '0011111111111100000000',
                '0001111111110000000000',
                $e, $e, $e, $e,
            ],
            
            'D' => [
                $e, $e, $e, $e,
                '1111111110000000000000',
                '1111111111110000000000',
                '1111111111111100000000',
                '1111111111111110000000',
                '1111000001111111000000',
                '1111000000111111100000',
                '1111000000011111100000',
                '1111000000001111110000',
                '1111000000001111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000001111110000',
                '1111000000001111110000',
                '1111000000011111100000',
                '1111000000111111100000',
                '1111000001111111000000',
                '1111111111111110000000',
                '1111111111111100000000',
                '1111111111110000000000',
                '1111111110000000000000',
                $e, $e, $e, $e,
            ],
            
            'E' => [
                $e, $e, $e, $e,
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111111111111111000000',
                '1111111111111111000000',
                '1111111111111111000000',
                '1111111111111111000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                $e, $e, $e, $e,
            ],
            
            'F' => [
                $e, $e, $e, $e,
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111111111111111000000',
                '1111111111111111000000',
                '1111111111111111000000',
                '1111111111111111000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                $e, $e, $e, $e,
            ],
            
            'G' => [
                $e, $e, $e, $e,
                '0001111111110000000000',
                '0011111111111100000000',
                '0111111111111110000000',
                '1111110000111111000000',
                '1111000000011111100000',
                '1111000000001111100000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000011111111110000',
                '1111000011111111110000',
                '1111000011111111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111100000000111110000',
                '0111110000001111110000',
                '0111111111111111100000',
                '0011111111111111000000',
                '0001111111110111000000',
                '0000000000000000000000',
                $e, $e, $e, $e,
            ],
            
            'H' => [
                $e, $e, $e, $e,
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                $e, $e, $e, $e,
            ],
            
            'I' => [
                $e, $e, $e, $e,
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                $e, $e, $e, $e,
            ],
            
            'J' => [
                $e, $e, $e, $e,
                '0000011111111111110000',
                '0000011111111111110000',
                '0000011111111111110000',
                '0000011111111111110000',
                '0000000000111110000000',
                '0000000000111110000000',
                '0000000000111110000000',
                '0000000000111110000000',
                '0000000000111110000000',
                '0000000000111110000000',
                '0000000000111110000000',
                '0000000000111110000000',
                '0000000000111110000000',
                '0000000000111110000000',
                '0000000000111110000000',
                '0000000000111110000000',
                '0000000000111110000000',
                '0000000000111110000000',
                '1111000000111110000000',
                '1111100001111110000000',
                '0111111111111100000000',
                '0011111111111000000000',
                '0001111111100000000000',
                '0000000000000000000000',
                $e, $e, $e, $e,
            ],
            
            'K' => [
                $e, $e, $e, $e,
                '1111000000001111100000',
                '1111000000011111000000',
                '1111000000111110000000',
                '1111000001111100000000',
                '1111000011111000000000',
                '1111000111110000000000',
                '1111001111100000000000',
                '1111011111000000000000',
                '1111111110000000000000',
                '1111111111000000000000',
                '1111111111100000000000',
                '1111101111110000000000',
                '1111100111111000000000',
                '1111000111111000000000',
                '1111000011111100000000',
                '1111000001111110000000',
                '1111000000111111000000',
                '1111000000111111000000',
                '1111000000011111100000',
                '1111000000001111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                $e, $e, $e, $e,
            ],
            
            'L' => [
                $e, $e, $e, $e,
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                $e, $e, $e, $e,
            ],
            
            'M' => [
                $e, $e, $e, $e,
                '1110000000000001110000',
                '1111000000000011110000',
                '1111100000000111110000',
                '1111110000001111110000',
                '1111111000011111110000',
                '1111111100111111110000',
                '1111011111111011110000',
                '1111001111110011110000',
                '1111000111100011110000',
                '1111000011000011110000',
                '1111000000000011110000',
                '1111000000000011110000',
                '1111000000000011110000',
                '1111000000000011110000',
                '1111000000000011110000',
                '1111000000000011110000',
                '1111000000000011110000',
                '1111000000000011110000',
                '1111000000000011110000',
                '1111000000000011110000',
                '1111000000000011110000',
                '1111000000000011110000',
                '1111000000000011110000',
                '1111000000000011110000',
                $e, $e, $e, $e,
            ],
            
            'N' => [
                $e, $e, $e, $e,
                '1110000000000111110000',
                '1111000000000111110000',
                '1111100000000111110000',
                '1111110000000111110000',
                '1111111000000111110000',
                '1111111100000111110000',
                '1111011110000111110000',
                '1111001111000111110000',
                '1111000111100111110000',
                '1111000011110111110000',
                '1111000001111111110000',
                '1111000000111111110000',
                '1111000000111111110000',
                '1111000000011111110000',
                '1111000000001111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000011110000',
                '1111000000000011110000',
                '1111000000000011110000',
                '1111000000000001110000',
                '1111000000000001110000',
                '1111000000000001110000',
                '1111000000000001110000',
                $e, $e, $e, $e,
            ],
            
            'O' => [
                $e, $e, $e, $e,
                '0001111111110000000000',
                '0011111111111100000000',
                '0111111111111110000000',
                '1111110000111111000000',
                '1111000000011111100000',
                '1111000000001111100000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000001111100000',
                '1111000000001111100000',
                '1111110000111111000000',
                '0111111111111110000000',
                '0011111111111100000000',
                '0001111111110000000000',
                '0000000000000000000000',
                $e, $e, $e, $e,
            ],
            
            'P' => [
                $e, $e, $e, $e,
                '1111111111110000000000',
                '1111111111111100000000',
                '1111111111111110000000',
                '1111111111111111000000',
                '1111000000111111000000',
                '1111000000011111100000',
                '1111000000011111100000',
                '1111000000011111100000',
                '1111000000011111100000',
                '1111000000111111000000',
                '1111111111111111000000',
                '1111111111111110000000',
                '1111111111111100000000',
                '1111111111110000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                $e, $e, $e, $e,
            ],
            
            'Q' => [
                $e, $e, $e, $e,
                '0001111111110000000000',
                '0011111111111100000000',
                '0111111111111110000000',
                '1111110000111111000000',
                '1111000000011111100000',
                '1111000000001111100000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000110000111110000',
                '1111001111000111110000',
                '1111011111100111110000',
                '1111111111110111110000',
                '1111111001111111100000',
                '1111110000111111100000',
                '1111110000111111000000',
                '0111111111111110000000',
                '0011111111111111100000',
                '0001111111110111110000',
                '0000000000000001111000',
                $e, $e, $e, $e,
            ],
            
            'R' => [
                $e, $e, $e, $e,
                '1111111111110000000000',
                '1111111111111100000000',
                '1111111111111110000000',
                '1111111111111111000000',
                '1111000000111111000000',
                '1111000000011111100000',
                '1111000000011111100000',
                '1111000000011111100000',
                '1111000000111111000000',
                '1111111111111111000000',
                '1111111111111110000000',
                '1111111111111100000000',
                '1111111111110000000000',
                '1111011111110000000000',
                '1111001111111000000000',
                '1111000111111000000000',
                '1111000011111100000000',
                '1111000001111110000000',
                '1111000000111111000000',
                '1111000000111111000000',
                '1111000000011111100000',
                '1111000000001111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                $e, $e, $e, $e,
            ],
            
            'S' => [
                $e, $e, $e, $e,
                '0001111111110000000000',
                '0011111111111100000000',
                '0111111111111110000000',
                '1111110000111111000000',
                '1111000000011111100000',
                '1111000000000000000000',
                '1111000000000000000000',
                '0111100000000000000000',
                '0011111100000000000000',
                '0001111111100000000000',
                '0000111111111000000000',
                '0000001111111100000000',
                '0000000011111110000000',
                '0000000000111111000000',
                '0000000000011111000000',
                '0000000000001111100000',
                '0000000000001111100000',
                '0000000000001111100000',
                '1111000000011111100000',
                '1111110000111111000000',
                '0111111111111110000000',
                '0011111111111100000000',
                '0001111111110000000000',
                '0000000000000000000000',
                $e, $e, $e, $e,
            ],
            
            'T' => [
                $e, $e, $e, $e,
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                '0000001111100000000000',
                $e, $e, $e, $e,
            ],
            
            'U' => [
                $e, $e, $e, $e,
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000001111100000',
                '0111100000001111100000',
                '0111110000011111000000',
                '0011111111111110000000',
                '0001111111111100000000',
                '0000111111110000000000',
                '0000000000000000000000',
                $e, $e, $e, $e,
            ],
            
            'V' => [
                $e, $e, $e, $e,
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '1111000000000111110000',
                '0111100000001111100000',
                '0111100000001111100000',
                '0111100000001111100000',
                '0111100000001111100000',
                '0011110000011111000000',
                '0011110000011111000000',
                '0011110000011111000000',
                '0001111000111110000000',
                '0001111000111110000000',
                '0001111000111110000000',
                '0000111101111100000000',
                '0000111101111100000000',
                '0000011111111000000000',
                '0000011111111000000000',
                '0000001111110000000000',
                '0000001111110000000000',
                '0000000111100000000000',
                '0000000111100000000000',
                $e, $e, $e, $e,
            ],
            
            'W' => [
                $e, $e, $e, $e,
                '1110000000000001110000',
                '1110000000000001110000',
                '1110000000000001110000',
                '1110000000000001110000',
                '1111000000000011110000',
                '1111000000000011110000',
                '1111000000000011110000',
                '1111000110000011110000',
                '1111001111000011110000',
                '1111011111100011110000',
                '1111111111110011110000',
                '1111111111111011110000',
                '1111111111111111110000',
                '1111110111111111110000',
                '1111100011111111110000',
                '1111000001111111110000',
                '1111000001111011110000',
                '1110000000111011110000',
                '1110000000110001110000',
                '1110000000110001110000',
                '1110000000000001110000',
                '1110000000000001110000',
                '1110000000000001110000',
                '1110000000000001110000',
                $e, $e, $e, $e,
            ],
            
            'X' => [
                $e, $e, $e, $e,
                '1111000000000111110000',
                '1111000000000111110000',
                '0111100000001111100000',
                '0111100000001111100000',
                '0011110000011111000000',
                '0011110000011111000000',
                '0001111000111110000000',
                '0001111000111110000000',
                '0000111101111100000000',
                '0000111101111100000000',
                '0000011111111000000000',
                '0000011111111000000000',
                '0000001111110000000000',
                '0000001111110000000000',
                '0000011111111000000000',
                '0000011111111000000000',
                '0000111101111100000000',
                '0001111000111110000000',
                '0001111000111110000000',
                '0011110000011111000000',
                '0111100000001111100000',
                '0111100000001111100000',
                '1111000000000111110000',
                '1111000000000111110000',
                $e, $e, $e, $e,
            ],
            
            'Y' => [
                $e, $e, $e, $e,
                '1111000000000111110000',
                '1111000000000111110000',
                '0111100000001111100000',
                '0111100000001111100000',
                '0011110000011111000000',
                '0011110000011111000000',
                '0001111000111110000000',
                '0001111000111110000000',
                '0000111101111100000000',
                '0000111101111100000000',
                '0000011111111000000000',
                '0000011111111000000000',
                '0000001111110000000000',
                '0000001111110000000000',
                '0000001111110000000000',
                '0000001111110000000000',
                '0000001111110000000000',
                '0000001111110000000000',
                '0000001111110000000000',
                '0000001111110000000000',
                '0000001111110000000000',
                '0000001111110000000000',
                '0000001111110000000000',
                '0000001111110000000000',
                $e, $e, $e, $e,
            ],
            
            'Z' => [
                $e, $e, $e, $e,
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '0000000000001111100000',
                '0000000000011111000000',
                '0000000000111110000000',
                '0000000001111100000000',
                '0000000011111000000000',
                '0000000111110000000000',
                '0000001111100000000000',
                '0000011111000000000000',
                '0000111110000000000000',
                '0001111100000000000000',
                '0011111000000000000000',
                '0111110000000000000000',
                '1111100000000000000000',
                '1111000000000000000000',
                '1110000000000000000000',
                '1100000000000000000000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                $e, $e, $e, $e,
            ],
            
            // Les chiffres maintenant...
            '0' => [
                $e, $e, $e, $e,
                '0001111111110000000000',
                '0011111111111100000000',
                '0111111111111110000000',
                '1111110000111111000000',
                '1111000000011111100000',
                '1111000000001111100000',
                '1111000000000111110000',
                '1111000000110111110000',
                '1111000001111111110000',
                '1111000011111111110000',
                '1111000111110111110000',
                '1111001111000111110000',
                '1111011110000111110000',
                '1111111100000111110000',
                '1111111000000111110000',
                '1111110000000111110000',
                '1111000000000111110000',
                '1111000000001111100000',
                '1111000000001111100000',
                '1111110000111111000000',
                '0111111111111110000000',
                '0011111111111100000000',
                '0001111111110000000000',
                '0000000000000000000000',
                $e, $e, $e, $e,
            ],
            
            '1' => [
                $e, $e, $e, $e,
                '0000001111000000000000',
                '0000011111000000000000',
                '0000111111000000000000',
                '0001111111000000000000',
                '0011111111000000000000',
                '0011110111000000000000',
                '0000000111000000000000',
                '0000000111000000000000',
                '0000000111000000000000',
                '0000000111000000000000',
                '0000000111000000000000',
                '0000000111000000000000',
                '0000000111000000000000',
                '0000000111000000000000',
                '0000000111000000000000',
                '0000000111000000000000',
                '0000000111000000000000',
                '0000000111000000000000',
                '0000000111000000000000',
                '0000000111000000000000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                $e, $e, $e, $e,
            ],
            
            '2' => [
                $e, $e, $e, $e,
                '0001111111110000000000',
                '0011111111111100000000',
                '0111111111111110000000',
                '1111110000111111000000',
                '1111000000011111100000',
                '1111000000001111100000',
                '0000000000001111100000',
                '0000000000011111000000',
                '0000000000111110000000',
                '0000000001111100000000',
                '0000000011111000000000',
                '0000000111110000000000',
                '0000001111100000000000',
                '0000011111000000000000',
                '0000111110000000000000',
                '0001111100000000000000',
                '0011111000000000000000',
                '0111110000000000000000',
                '1111100000000000000000',
                '1111000000000000000000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                $e, $e, $e, $e,
            ],
            
            '3' => [
                $e, $e, $e, $e,
                '0001111111110000000000',
                '0011111111111100000000',
                '0111111111111110000000',
                '1111110000111111000000',
                '1111000000011111100000',
                '0000000000011111100000',
                '0000000000111111000000',
                '0000000001111110000000',
                '0000111111111100000000',
                '0000111111111100000000',
                '0000111111111110000000',
                '0000000001111111000000',
                '0000000000111111100000',
                '0000000000011111100000',
                '0000000000001111100000',
                '0000000000001111100000',
                '0000000000001111100000',
                '1111000000011111100000',
                '1111110000111111000000',
                '0111111111111110000000',
                '0011111111111100000000',
                '0001111111110000000000',
                '0000000000000000000000',
                '0000000000000000000000',
                $e, $e, $e, $e,
            ],
            
            '4' => [
                $e, $e, $e, $e,
                '0000000000111110000000',
                '0000000001111110000000',
                '0000000011111110000000',
                '0000000111011110000000',
                '0000001111011110000000',
                '0000011110011110000000',
                '0000111100011110000000',
                '0001111000011110000000',
                '0011110000011110000000',
                '0111100000011110000000',
                '1111000000011110000000',
                '1110000000011110000000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '0000000000011110000000',
                '0000000000011110000000',
                '0000000000011110000000',
                '0000000000011110000000',
                '0000000000011110000000',
                '0000000000011110000000',
                '0000000000011110000000',
                '0000000000011110000000',
                $e, $e, $e, $e,
            ],
            
            '5' => [
                $e, $e, $e, $e,
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111111111110000000000',
                '1111111111111100000000',
                '1111111111111110000000',
                '1111110000111111000000',
                '0000000000011111100000',
                '0000000000001111100000',
                '0000000000001111100000',
                '0000000000001111100000',
                '0000000000001111100000',
                '1111000000011111100000',
                '1111110000111111000000',
                '0111111111111110000000',
                '0011111111111100000000',
                '0001111111110000000000',
                '0000000000000000000000',
                '0000000000000000000000',
                $e, $e, $e, $e,
            ],
            
            '6' => [
                $e, $e, $e, $e,
                '0000111111110000000000',
                '0011111111111100000000',
                '0111111111111110000000',
                '1111110000111111000000',
                '1111000000011111100000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111111111110000000000',
                '1111111111111100000000',
                '1111111111111110000000',
                '1111110000111111000000',
                '1111000000011111100000',
                '1111000000001111100000',
                '1111000000001111100000',
                '1111000000001111100000',
                '1111000000001111100000',
                '1111000000011111100000',
                '1111110000111111000000',
                '0111111111111110000000',
                '0011111111111100000000',
                '0001111111110000000000',
                '0000000000000000000000',
                '0000000000000000000000',
                $e, $e, $e, $e,
            ],
            
            '7' => [
                $e, $e, $e, $e,
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '0000000000001111100000',
                '0000000000011111000000',
                '0000000000111110000000',
                '0000000001111100000000',
                '0000000001111000000000',
                '0000000011110000000000',
                '0000000111100000000000',
                '0000000111100000000000',
                '0000001111000000000000',
                '0000011110000000000000',
                '0000011110000000000000',
                '0000111100000000000000',
                '0001111000000000000000',
                '0001111000000000000000',
                '0011110000000000000000',
                '0111100000000000000000',
                '0111100000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                '1111000000000000000000',
                $e, $e, $e, $e,
            ],
            
            '8' => [
                $e, $e, $e, $e,
                '0001111111110000000000',
                '0011111111111100000000',
                '0111111111111110000000',
                '1111110000111111000000',
                '1111000000011111100000',
                '1111000000011111100000',
                '1111000000011111100000',
                '1111110000111111000000',
                '0111111111111110000000',
                '0011111111111100000000',
                '0001111111110000000000',
                '0011111111111100000000',
                '0111111111111110000000',
                '1111110000111111000000',
                '1111000000011111100000',
                '1111000000001111100000',
                '1111000000001111100000',
                '1111000000011111100000',
                '1111110000111111000000',
                '0111111111111110000000',
                '0011111111111100000000',
                '0001111111110000000000',
                '0000000000000000000000',
                '0000000000000000000000',
                $e, $e, $e, $e,
            ],
            
            '9' => [
                $e, $e, $e, $e,
                '0001111111110000000000',
                '0011111111111100000000',
                '0111111111111110000000',
                '1111110000111111000000',
                '1111000000011111100000',
                '1111000000001111100000',
                '1111000000001111100000',
                '1111000000001111100000',
                '1111000000001111100000',
                '1111000000011111100000',
                '1111110000111111100000',
                '0111111111111111100000',
                '0011111111110111100000',
                '0001111111000111100000',
                '0000000000001111100000',
                '0000000000001111100000',
                '0000000000011111000000',
                '1111000000111111000000',
                '1111110001111110000000',
                '0111111111111100000000',
                '0011111111111000000000',
                '0001111111100000000000',
                '0000000000000000000000',
                '0000000000000000000000',
                $e, $e, $e, $e,
            ],
            
            // Symboles
            ':' => [
                $e, $e, $e, $e, $e, $e, $e, $e, $e, $e,
                '0000111110000000000000',
                '0001111111000000000000',
                '0011111111100000000000',
                '0011111111100000000000',
                '0001111111000000000000',
                '0000111110000000000000',
                $e, $e, $e, $e,
                '0000111110000000000000',
                '0001111111000000000000',
                '0011111111100000000000',
                '0011111111100000000000',
                '0001111111000000000000',
                '0000111110000000000000',
                $e, $e, $e, $e, $e, $e,
            ],
            
            '.' => [
                $e, $e, $e, $e, $e, $e, $e, $e, $e, $e, $e, $e, $e, $e, $e, $e, $e, $e, $e, $e, $e, $e, $e, $e,
                '0000111110000000000000',
                '0001111111000000000000',
                '0011111111100000000000',
                '0011111111100000000000',
                '0001111111000000000000',
                '0000111110000000000000',
                $e, $e, $e, $e,
            ],
            
            '/' => [
                $e, $e, $e, $e,
                '0000000000001111100000',
                '0000000000011111000000',
                '0000000000111110000000',
                '0000000001111100000000',
                '0000000011111000000000',
                '0000000111110000000000',
                '0000001111100000000000',
                '0000011111000000000000',
                '0000111110000000000000',
                '0001111100000000000000',
                '0011111000000000000000',
                '0111110000000000000000',
                '1111100000000000000000',
                '1111000000000000000000',
                '1110000000000000000000',
                '1100000000000000000000',
                '1000000000000000000000',
                '0000000000000000000000',
                '0000000000000000000000',
                '0000000000000000000000',
                '0000000000000000000000',
                '0000000000000000000000',
                '0000000000000000000000',
                '0000000000000000000000',
                $e, $e, $e, $e,
            ],
            
            '-' => [
                $e, $e, $e, $e, $e, $e, $e, $e, $e, $e, $e, $e, $e, $e,
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                '1111111111111111110000',
                $e, $e, $e, $e, $e, $e, $e, $e, $e, $e, $e, $e, $e, $e,
            ],
        ];

        $char = strtoupper($char);
        return $patterns[$char] ?? $patterns[' '];
    }

    /**
     * Render a string using bitmap font to SVG.
     */
    public static function renderText(
        SvgBuilder $svg,
        string $text,
        int $x,
        int $y,
        int $charWidth,
        int $charHeight,
        string $color = 'black'
    ): void {
        $currentX = $x;
        
        // Pattern dimensions: 36 rows × 22 columns
        $patternCols = 22;
        $patternRows = 36;
        
        // Calculate pixel size to fill the ZPL character cell
        $pixelWidth = $charWidth / $patternCols;
        $pixelHeight = $charHeight / $patternRows;
        
        for ($i = 0; $i < strlen($text); $i++) {
            $char = $text[$i];
            $pattern = self::getCharacterPattern($char);
            
            // Draw each pixel of the character
            for ($row = 0; $row < $patternRows; $row++) {
                for ($col = 0; $col < $patternCols; $col++) {
                    if (isset($pattern[$row][$col]) && $pattern[$row][$col] === '1') {
                        $pixelX = (int)($currentX + ($col * $pixelWidth));
                        $pixelY = (int)($y + ($row * $pixelHeight));
                        $svg->addRect(
                            $pixelX,
                            $pixelY,
                            max(1, (int)ceil($pixelWidth)),
                            max(1, (int)ceil($pixelHeight)),
                            $color,
                            'none'
                        );
                    }
                }
            }
            
            // Move to next character position
            $currentX += $charWidth;
        }
    }
}
